# 経営者ダッシュボード設計書

## 📋 概要

**作成日**: 2025/10/07
**バージョン**: 1.0
**ステータス**: 設計中

建設業界向けCRM「DRM Suite」の経営者向けダッシュボード設計。
企業規模や経営スタイルに応じてカスタマイズ可能な3つのテンプレートを提供。

---

## 🎯 設計方針

### アプローチ: テンプレート + カスタマイズ

**3つのプリセットテンプレート**を用意し、企業規模・経営スタイルに応じて選択可能。
各テンプレートは後からカスタマイズ可能。

---

## 📊 テンプレート仕様

### 1. 全体俯瞰型（大企業向け）

**対象企業**: 従業員100名以上の大規模建設会社
**パス**: `/dashboard/executive/overview`

#### 特徴
- 部門別KPIサマリー重視
- トレンドグラフ中心
- アラート・例外のみ詳細表示
- 意思決定に必要な情報を一画面で把握

#### 画面構成

```
┌─────────────────────────────────────────────────────┐
│  経営ダッシュボード - 全体俯瞰型   [設定] [切替]      │
├─────────────────────────────────────────────────────┤
│                                                     │
│ ┌─────── KPIサマリー ──────┐                       │
│ │ 売上  粗利率  CF  受注率  │                       │
│ │ ¥125M  24.2%  ¥45M  68%   │                       │
│ └──────────────────────────┘                       │
│                                                     │
│ ┌───── 部門別パフォーマンス ─────┐                   │
│ │ 営業部  施工部  経理部  etc... │                   │
│ │ [グラフ] [グラフ] [グラフ]     │                   │
│ └──────────────────────────────┘                   │
│                                                     │
│ ┌────────┐  ┌────────┐  ┌────────┐               │
│ │売上推移 │  │粗利推移 │  │CF推移  │               │
│ │        │  │        │  │        │               │
│ └────────┘  └────────┘  └────────┘               │
│                                                     │
│ ┌───────── アラート ─────────┐                     │
│ │ ⚠️ 千葉支店の粗利率が3ヶ月連続低下 │                     │
│ │ ⚠️ 回収遅延が30日を超えた案件: 3件 │                     │
│ └────────────────────────────┘                     │
└─────────────────────────────────────────────────────┘
```

#### 表示データ

**KPIカード（上部）**
- 全社売上（月次・年次）
- 粗利率
- キャッシュフロー
- 受注率
- 前月比・前年比

**部門別パフォーマンス**
- 各部門の売上・粗利
- 部門別受注率
- 人員あたり生産性

**トレンドグラフ（3つ）**
- 売上推移（6ヶ月）
- 粗利推移（6ヶ月）
- キャッシュフロー推移（6ヶ月）

**アラート**
- 粗利率低下の部門
- 回収遅延案件
- 予算達成率の低い部門

---

### 2. 詳細分析型（中小企業向け）

**対象企業**: 従業員30～100名の中小建設会社
**パス**: `/dashboard/executive/detailed`

#### 特徴
- 経理・営業・マーケティングデータを混在表示
- 案件ごとの進捗確認
- 詳細テーブル表示
- 経営者が現場も把握したい場合に最適

#### 画面構成

```
┌─────────────────────────────────────────────────────┐
│  経営ダッシュボード - 詳細分析型   [設定] [切替]      │
├─────────────────────────────────────────────────────┤
│                                                     │
│ ┌──── 財務サマリー ────┐  ┌──── 営業状況 ────┐   │
│ │ 売上   ¥125M         │  │ 見積中    12件   │   │
│ │ 粗利率  24.2%        │  │ 交渉中     8件   │   │
│ │ CF     ¥45M          │  │ 受注済    15件   │   │
│ └─────────────────────┘  └─────────────────┘   │
│                                                     │
│ ┌────────── 重要案件一覧 ──────────┐               │
│ │ 案件名    顧客     進捗   粗利   担当          │               │
│ │ 新築工事  山田建設  80%  ¥8M   佐藤           │               │
│ │ リフォーム 鈴木商事  60%  ¥3M   田中           │               │
│ │ ...                                  │               │
│ └──────────────────────────────────┘               │
│                                                     │
│ ┌──── キャッシュフロー ────┐  ┌─── マーケROI ───┐│
│ │ [月次CF推移グラフ]        │  │ CAC    ¥8,420  ││
│ │                          │  │ LTV    ¥285M   ││
│ │                          │  │ ROI     425%   ││
│ └──────────────────────────┘  └────────────────┘│
│                                                     │
│ ┌────────── 顧客管理サマリー ──────────┐           │
│ │ 総顧客数: 458  新規: 12  離反リスク: 3        │           │
│ └──────────────────────────────────────┘           │
└─────────────────────────────────────────────────────┘
```

#### 表示データ

**財務サマリー**
- 売上・粗利率・キャッシュフロー
- 経費内訳
- 部門別損益

**営業状況**
- パイプライン状況（見積中・交渉中・受注済）
- 受注率
- 失注分析

**重要案件一覧**（テーブル）
- 売上¥5M以上の案件
- 進捗状況
- 粗利予測
- 担当者

**キャッシュフローグラフ**
- 月次推移
- 入金予定
- 支払予定

**マーケティングROI**
- CAC（顧客獲得コスト）
- LTV（顧客生涯価値）
- チャネル別ROI

**顧客管理サマリー**
- 総顧客数
- 新規顧客
- 離反リスク顧客

---

### 3. クイックビュー型（スタートアップ向け）

**対象企業**: 従業員30名未満のスタートアップ・小規模建設会社
**パス**: `/dashboard/executive/quick`

#### 特徴
- 最重要指標のみ（売上・粗利・CF）
- リアルタイム通知
- モバイル最適化
- シンプルで分かりやすい

#### 画面構成（モバイルファースト）

```
┌──────────────────────┐
│  DRM Suite           │
│  [🔔通知3]  [⚙️設定]  │
├──────────────────────┤
│                      │
│  📊 今月の実績        │
│                      │
│  売上                │
│  ¥125M               │
│  目標: ¥150M (83%)   │
│  ▓▓▓▓▓▓▓▓▓░░░        │
│                      │
│  粗利率               │
│  24.2%               │
│  目標: 25% (97%)     │
│  ▓▓▓▓▓▓▓▓▓▓░         │
│                      │
│  CF                  │
│  ¥45M (健全)         │
│  ▓▓▓▓▓▓▓▓▓▓▓▓        │
│                      │
├──────────────────────┤
│  🚨 要対応            │
│                      │
│  ⚠️ 回収遅延: 3件     │
│  → 詳細を見る        │
│                      │
│  ⚠️ 粗利率低下案件     │
│  → 詳細を見る        │
│                      │
├──────────────────────┤
│  📈 クイックアクション │
│                      │
│  [顧客一覧]           │
│  [案件確認]           │
│  [見積作成]           │
│                      │
└──────────────────────┘
```

#### 表示データ

**今月の実績（カード形式）**
- 売上（目標達成率）
- 粗利率（目標達成率）
- キャッシュフロー（ステータス）

**要対応アラート**
- 回収遅延案件
- 粗利率低下案件
- 予算未達の恐れ

**クイックアクション**
- 顧客一覧へのショートカット
- 案件確認
- 見積作成

---

## 🎨 共通UI仕様

### カラースキーム

**ステータスカラー**
- 好調: `#4caf50` (緑)
- 警告: `#ff9800` (オレンジ)
- 要対策: `#f44336` (赤)
- 中立: `#2196f3` (青)

**グラデーション（メインカラー）**
```css
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
```

### レスポンシブ対応

- デスクトップ: 1920x1080 最適化
- タブレット: 1024x768 対応
- モバイル: 375x667 対応（クイックビュー型）

---

## 🔧 技術仕様

### ファイル構成

```
src/app/dashboard/executive/
├── layout.tsx              # 共通レイアウト
├── page.tsx                # デフォルトページ（テンプレート選択）
├── overview/
│   └── page.tsx            # 全体俯瞰型
├── detailed/
│   └── page.tsx            # 詳細分析型
└── quick/
    └── page.tsx            # クイックビュー型

src/components/dashboard/
├── KPICard.tsx             # KPIカード
├── TrendChart.tsx          # トレンドグラフ
├── AlertPanel.tsx          # アラートパネル
├── DepartmentCard.tsx      # 部門別カード
└── ProjectTable.tsx        # 案件テーブル
```

### データフェッチング

```typescript
// src/services/dashboard/executive.ts

export async function getExecutiveDashboard(
  templateType: 'overview' | 'detailed' | 'quick'
) {
  // APIからデータ取得
  return {
    kpi: {
      revenue: number,
      grossMargin: number,
      cashFlow: number,
      orderRate: number
    },
    departments: Array<DepartmentData>,
    trends: Array<TrendData>,
    alerts: Array<AlertData>,
    projects: Array<ProjectData>
  };
}
```

---

## 📅 実装スケジュール

### フェーズ1: 基盤構築（1-2日）
- [ ] ファイル構成作成
- [ ] 共通コンポーネント実装
- [ ] データ型定義

### フェーズ2: テンプレート実装（3-5日）
- [ ] 全体俯瞰型実装
- [ ] 詳細分析型実装
- [ ] クイックビュー型実装

### フェーズ3: カスタマイズ機能（2-3日）
- [ ] テンプレート切替機能
- [ ] 設定保存機能
- [ ] ウィジェット追加/削除

### フェーズ4: テスト・改善（1-2日）
- [ ] 動作確認
- [ ] パフォーマンステスト
- [ ] UI/UX改善

---

## 🔒 セーフポイント

**Git タグ**: `v1.1.0-ma-optimization`
**コミット**: `4d16f66`
**日付**: 2025/10/07

このポイントからいつでも戻すことが可能。

次の大型実装開始前に必ず:
```bash
git tag -a v1.2.0-executive-dashboard-start -m "経営者ダッシュボード実装開始前"
git push origin v1.2.0-executive-dashboard-start
```

---

**最終更新**: 2025/10/07
**作成者**: Claude Code + Human
