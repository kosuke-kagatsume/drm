'use client';

import { useRouter } from 'next/navigation';

interface TodoItem {
  id: string;
  title: string;
  deadline: string;
  priority: 'high' | 'medium' | 'low';
  type: 'estimate' | 'contract' | 'visit';
  customer: string;
  amount?: number;
}

interface SalesDashboardProps {
  userEmail: string;
}

export default function SalesDashboard({ userEmail }: SalesDashboardProps) {
  const router = useRouter();

  const todayTodos: TodoItem[] = [
    {
      id: '1',
      title: 'Áî∞‰∏≠ÊßòÈÇ∏ Ë¶ãÁ©çÊèêÂá∫',
      deadline: 'Êú¨Êó• 15:00',
      priority: 'high',
      type: 'estimate',
      customer: 'Áî∞‰∏≠Âª∫Ë®≠',
      amount: 2500000,
    },
    {
      id: '2',
      title: 'Â±±Áî∞Êßò Êù•Â∫ó‰∫àÂÆö',
      deadline: 'Êú¨Êó• 16:00',
      priority: 'medium',
      type: 'visit',
      customer: 'Â±±Áî∞Â∑•ÂãôÂ∫ó',
    },
    {
      id: '3',
      title: 'Â•ëÁ¥ÑÊõ∏Á¢∫Ë™ç',
      deadline: 'ÊòéÊó• 10:00',
      priority: 'low',
      type: 'contract',
      customer: '‰ΩêËó§„É™„Éï„Ç©„Éº„É†',
      amount: 1800000,
    },
  ];

  const kpiData = {
    monthlyTarget: 10,
    currentContracts: 7,
    conversionRate: 35,
    averageAmount: 2100000,
  };

  const getPriorityColor = (priority: string) => {
    switch (priority) {
      case 'high':
        return 'border-red-500/50 bg-red-500/10';
      case 'medium':
        return 'border-amber-500/50 bg-amber-500/10';
      default:
        return 'border-emerald-500/50 bg-emerald-500/10';
    }
  };

  const getTypeIndicator = (type: string) => {
    switch (type) {
      case 'estimate':
        return '01';
      case 'contract':
        return '02';
      case 'visit':
        return '03';
      default:
        return '00';
    }
  };

  return (
    <div className="space-y-6">
      {/* TODAY'S ALERT */}
      <div className="bg-zinc-950 border border-red-500/30 p-6">
        <div className="flex items-center">
          <div className="flex-shrink-0">
            <div className="w-8 h-8 border border-red-500/50 flex items-center justify-center text-red-500 font-light text-xs">
              01
            </div>
          </div>
          <div className="ml-4">
            <h3 className="text-xs font-normal text-red-500 tracking-widest">
              URGENT: TODAY 15:00 DEADLINE
            </h3>
            <div className="mt-2 text-xs text-zinc-400 tracking-wider">
              <p>TANAKA RESIDENCE ESTIMATE SUBMISSION DUE IN 4 HOURS.</p>
              <button
                onClick={() => router.push('/estimates/create-v2')}
                className="mt-3 bg-white text-black px-4 py-2 text-xs tracking-wider hover:bg-zinc-200 transition-colors"
              >
                CREATE ESTIMATE ‚Üí
              </button>
            </div>
          </div>
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* TODAY'S TASKS */}
        <div className="lg:col-span-2">
          <div className="bg-zinc-950 border border-zinc-800">
            <div className="px-6 py-4 border-b border-zinc-800">
              <h2 className="text-sm font-normal text-white tracking-widest flex items-center">
                TODAY'S TASKS
                <span className="ml-3 border border-zinc-700 text-zinc-400 text-xs px-3 py-1 tracking-wider">
                  {todayTodos.length} ITEMS
                </span>
              </h2>
            </div>
            <div className="p-6 space-y-4">
              {todayTodos.map((todo) => (
                <div
                  key={todo.id}
                  className={`border-l-4 p-4 rounded ${getPriorityColor(todo.priority)}`}
                >
                  <div className="flex items-start justify-between">
                    <div className="flex-1">
                      <div className="flex items-center">
                        <div className="w-10 h-10 border border-zinc-700 flex items-center justify-center text-zinc-400 font-light text-sm mr-4">
                          {getTypeIndicator(todo.type)}
                        </div>
                        <div>
                          <h4 className="font-light text-white tracking-wider">
                            {todo.title.toUpperCase()}
                          </h4>
                          <p className="text-xs text-zinc-500 tracking-wider mt-1">
                            CLIENT: {todo.customer.toUpperCase()}
                            {todo.amount && (
                              <span className="ml-4">
                                AMOUNT: ¬•{todo.amount.toLocaleString()}
                              </span>
                            )}
                          </p>
                        </div>
                      </div>
                    </div>
                    <div className="text-right">
                      <p className="text-xs font-light text-white tracking-wider">
                        {todo.deadline.toUpperCase()}
                      </p>
                      <button className="mt-2 text-zinc-500 hover:text-white transition-colors text-xs tracking-wider">
                        DETAILS ‚Üí
                      </button>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* KPI PROGRESS */}
          <div className="bg-zinc-950 border border-zinc-800 mt-6">
            <div className="px-6 py-4 border-b border-zinc-800">
              <h2 className="text-sm font-normal text-white tracking-widest">
                THIS MONTH'S PERFORMANCE
              </h2>
            </div>
            <div className="p-6">
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <p className="text-xs text-zinc-500 tracking-wider">
                    CONTRACT COUNT
                  </p>
                  <p className="text-2xl font-thin text-white">
                    {kpiData.currentContracts}/{kpiData.monthlyTarget}
                  </p>
                  <div className="mt-2 bg-zinc-900 h-1">
                    <div
                      className="bg-blue-500/50 h-1 transition-all duration-500"
                      style={{
                        width: `${(kpiData.currentContracts / kpiData.monthlyTarget) * 100}%`,
                      }}
                    />
                  </div>
                </div>
                <div>
                  <p className="text-xs text-zinc-500 tracking-wider">
                    CONVERSION RATE
                  </p>
                  <p className="text-2xl font-thin text-white">
                    {kpiData.conversionRate}%
                  </p>
                  <p className="text-xs text-emerald-500 tracking-wider mt-1">
                    +5% FROM LAST MONTH
                  </p>
                </div>
                <div>
                  <p className="text-xs text-zinc-500 tracking-wider">
                    AVERAGE AMOUNT
                  </p>
                  <p className="text-xl font-thin text-white">
                    ¬•{kpiData.averageAmount.toLocaleString()}
                  </p>
                </div>
                <div>
                  <p className="text-xs text-zinc-500 tracking-wider">
                    TARGET ACHIEVEMENT
                  </p>
                  <p className="text-2xl font-thin text-emerald-500">70%</p>
                </div>
              </div>
            </div>
          </div>

          {/* Áµ±ÂêàË≤°ÂãôÂàÜÊûê„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ */}
          <div className="bg-white rounded-2xl shadow-lg mt-6 overflow-hidden">
            <div className="px-6 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white">
              <h3 className="font-semibold">üìä Âñ∂Ê•≠Ë≤°ÂãôÂàÜÊûê</h3>
            </div>
            <div className="p-6">
              {/* Âñ∂Ê•≠ÊàêÊûúÊåáÊ®ô */}
              <div className="grid grid-cols-2 gap-4 mb-6">
                <div className="bg-green-50 p-4 rounded-lg">
                  <h5 className="font-bold text-green-800 mb-2">üí∞ ÂèéÁõäÊåáÊ®ô</h5>
                  <div className="space-y-2 text-sm">
                    <div className="flex justify-between">
                      <span>Âñ∂Ê•≠Âà©Áõä</span>
                      <span className="font-bold">¬•4.2M</span>
                    </div>
                    <div className="flex justify-between">
                      <span>Á≤óÂà©Áéá</span>
                      <span className="font-bold">28.5%</span>
                    </div>
                    <div className="flex justify-between">
                      <span>ÂèóÊ≥®Âçò‰æ°</span>
                      <span className="font-bold">¬•2.1M</span>
                    </div>
                  </div>
                </div>

                <div className="bg-blue-50 p-4 rounded-lg">
                  <h5 className="font-bold text-blue-800 mb-2">üìà Âñ∂Ê•≠ÂäπÁéá</h5>
                  <div className="space-y-2 text-sm">
                    <div className="flex justify-between">
                      <span>ÊàêÁ¥ÑÁéá</span>
                      <span className="font-bold text-green-600">35%</span>
                    </div>
                    <div className="flex justify-between">
                      <span>„É™„Éº„Éâ„Çø„Ç§„É†</span>
                      <span className="font-bold">12Êó•</span>
                    </div>
                    <div className="flex justify-between">
                      <span>È°ßÂÆ¢Âçò‰æ°</span>
                      <span className="font-bold">¬•1.8M</span>
                    </div>
                  </div>
                </div>
              </div>

              {/* ÁõÆÊ®ôÈÅîÊàêÁä∂Ê≥Å */}
              <div className="bg-yellow-50 p-4 rounded-lg mb-4">
                <h5 className="font-bold text-yellow-800 mb-2">üéØ ÁõÆÊ®ôÈÄ≤Êçó</h5>
                <div className="space-y-3">
                  <div>
                    <div className="flex justify-between text-sm mb-1">
                      <span>ÊúàÊ¨°Â£≤‰∏äÁõÆÊ®ô</span>
                      <span>¬•14.7M / ¬•21M</span>
                    </div>
                    <div className="w-full bg-yellow-200 rounded-full h-2">
                      <div
                        className="bg-yellow-600 h-2 rounded-full"
                        style={{ width: '70%' }}
                      ></div>
                    </div>
                  </div>
                  <div>
                    <div className="flex justify-between text-sm mb-1">
                      <span>Â•ëÁ¥Ñ‰ª∂Êï∞ÁõÆÊ®ô</span>
                      <span>7‰ª∂ / 10‰ª∂</span>
                    </div>
                    <div className="w-full bg-yellow-200 rounded-full h-2">
                      <div
                        className="bg-green-500 h-2 rounded-full"
                        style={{ width: '70%' }}
                      ></div>
                    </div>
                  </div>
                </div>
              </div>

              {/* „ÇØ„Ç§„ÉÉ„ÇØ„Ç¢„ÇØ„Çª„Çπ */}
              <div className="grid grid-cols-3 gap-2">
                <button
                  onClick={() => router.push('/expenses')}
                  className="p-3 bg-red-50 rounded-lg hover:bg-red-100 transition text-center"
                >
                  <div className="text-xl mb-1">üí≥</div>
                  <div className="text-xs font-medium">ÁµåË≤ªÁî≥Ë´ã</div>
                </button>
                <button
                  onClick={() => router.push('/inventory')}
                  className="p-3 bg-orange-50 rounded-lg hover:bg-orange-100 transition text-center"
                >
                  <div className="text-xl mb-1">üì¶</div>
                  <div className="text-xs font-medium">Âú®Â∫´Á¢∫Ë™ç</div>
                </button>
                <button className="p-3 bg-purple-50 rounded-lg hover:bg-purple-100 transition text-center">
                  <div className="text-xl mb-1">üìä</div>
                  <div className="text-xs font-medium">Â£≤‰∏äÂàÜÊûê</div>
                </button>
              </div>
            </div>
          </div>
        </div>

        {/* RAG„Ç¢„Ç∑„Çπ„Çø„É≥„Éà */}
        <div className="lg:col-span-1">
          <div className="bg-white rounded-lg shadow sticky top-6">
            <div className="px-6 py-4 border-b bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-t-lg">
              <h2 className="text-lg font-semibold">ü§ñ RAG„Ç¢„Ç∑„Çπ„Çø„É≥„Éà</h2>
            </div>
            <div className="p-6">
              <div className="space-y-4">
                <div className="bg-purple-50 p-4 rounded">
                  <p className="text-sm font-medium text-purple-900 mb-2">
                    üí° „Åä„Åô„Åô„ÇÅË≥™Âïè
                  </p>
                  <div className="space-y-2">
                    <button className="w-full text-left text-sm bg-white p-2 rounded hover:bg-purple-100">
                      „ÄåÁî∞‰∏≠ÊßòÈÇ∏„Å´‰ºº„ÅüÈÅéÂéªÊ°à‰ª∂„ÅØÔºü„Äç
                    </button>
                    <button className="w-full text-left text-sm bg-white p-2 rounded hover:bg-purple-100">
                      „ÄåÂ§ñÂ£ÅÂ°óË£Ö„ÅÆÊ®ôÊ∫ñË¶ãÁ©çÈ†ÖÁõÆ„ÅØÔºü„Äç
                    </button>
                    <button className="w-full text-left text-sm bg-white p-2 rounded hover:bg-purple-100">
                      „ÄåÁ≤óÂà©20%Á¢∫‰øù„ÅÆ‰æ°Ê†ºË®≠ÂÆö„ÅØÔºü„Äç
                    </button>
                  </div>
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Ë≥™Âïè„ÇíÂÖ•Âäõ
                  </label>
                  <textarea
                    className="w-full px-3 py-2 border border-gray-300 rounded-md text-sm"
                    rows={3}
                    placeholder="‰æã: ÁØâ20Âπ¥Êú®ÈÄ†„ÅÆÂ§ñÂ£ÅÂ°óË£Ö„ÅÆÁõ∏Â†¥„ÅØÔºü"
                  />
                  <button className="mt-2 w-full bg-purple-600 text-white py-2 rounded hover:bg-purple-700">
                    RAG„Å´ËÅû„Åè
                  </button>
                </div>

                <div className="border-t pt-4">
                  <h4 className="text-sm font-medium text-gray-700 mb-2">
                    ÊúÄËøë„ÅÆÊ§úÁ¥¢
                  </h4>
                  <div className="space-y-1 text-sm text-gray-600">
                    <p>‚Ä¢ Â±ãÊ†π„É™„Éï„Ç©„Éº„É† Ë¶ãÁ©çÈ†ÖÁõÆ</p>
                    <p>‚Ä¢ ÂçîÂäõ‰ºöÁ§æA ÈÅéÂéªÂÆüÁ∏æ</p>
                    <p>‚Ä¢ Âéü‰æ°Áéá ÊîπÂñÑÊñπÊ≥ï</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Âñ∂Ê•≠Ê¥ªÂãï„Çª„É≥„Çø„Éº */}
      <div className="bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-2xl shadow-xl p-6 mb-6">
        <h2 className="text-2xl font-bold mb-4 flex items-center">
          <span className="text-3xl mr-3">üéØ</span>
          Âñ∂Ê•≠Ê¥ªÂãï„Çª„É≥„Çø„Éº
        </h2>
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
          <button
            onClick={() => router.push('/dark/customers')}
            className="bg-white/20 backdrop-blur-sm p-4 rounded-xl hover:bg-white/30 transform hover:scale-105 transition-all duration-200 border border-white/30"
          >
            <span className="text-3xl">üë•</span>
            <p className="mt-2 font-bold">È°ßÂÆ¢ÁÆ°ÁêÜ</p>
            <p className="text-xs text-white/80">CRM</p>
          </button>
          <button
            onClick={() => router.push('/estimates/editor-v3/new')}
            className="bg-white/20 backdrop-blur-sm p-4 rounded-xl hover:bg-white/30 transform hover:scale-105 transition-all duration-200 border border-white/30"
          >
            <span className="text-3xl">üìù</span>
            <p className="mt-2 font-bold">Êñ∞Ë¶èË¶ãÁ©ç</p>
            <p className="text-xs text-white/80">‰ΩúÊàê</p>
          </button>
          <button
            onClick={() => router.push('/estimates')}
            className="bg-white/20 backdrop-blur-sm p-4 rounded-xl hover:bg-white/30 transform hover:scale-105 transition-all duration-200 border border-white/30"
          >
            <span className="text-3xl">üìä</span>
            <p className="mt-2 font-bold">Ë¶ãÁ©ç‰∏ÄË¶ß</p>
            <p className="text-xs text-white/80">ÁÆ°ÁêÜ</p>
          </button>
          <button
            onClick={() => router.push('/map')}
            className="bg-white/20 backdrop-blur-sm p-4 rounded-xl hover:bg-white/30 transform hover:scale-105 transition-all duration-200 border border-white/30"
          >
            <span className="text-3xl">üó∫Ô∏è</span>
            <p className="mt-2 font-bold">Âú∞Âõ≥ÂàÜÊûê</p>
            <p className="text-xs text-white/80">„Ç®„É™„Ç¢</p>
          </button>
        </div>
      </div>

      {/* „Åù„ÅÆ‰ªñ„ÅÆ„ÉÑ„Éº„É´ */}
      <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
        <button
          onClick={() => router.push('/contracts')}
          className="bg-gradient-to-br from-blue-500 to-blue-600 text-white p-4 rounded-xl hover:shadow-lg transform hover:scale-105 transition-all duration-200"
        >
          <span className="text-2xl">üìÑ</span>
          <p className="mt-2 font-medium">Â•ëÁ¥ÑÁÆ°ÁêÜ</p>
        </button>
        <button
          onClick={() => router.push('/vendors')}
          className="bg-gradient-to-br from-purple-500 to-purple-600 text-white p-4 rounded-xl hover:shadow-lg transform hover:scale-105 transition-all duration-200"
        >
          <span className="text-2xl">üë∑</span>
          <p className="mt-2 font-medium">ÂçîÂäõ‰ºöÁ§æ</p>
        </button>
        <button
          onClick={() => router.push('/invoices')}
          className="bg-gradient-to-br from-green-500 to-green-600 text-white p-4 rounded-xl hover:shadow-lg transform hover:scale-105 transition-all duration-200"
        >
          <span className="text-2xl">üí∞</span>
          <p className="mt-2 font-medium">Ë´ãÊ±ÇÊõ∏</p>
        </button>
        <button
          onClick={() => router.push('/expenses')}
          className="bg-gradient-to-br from-orange-500 to-orange-600 text-white p-4 rounded-xl hover:shadow-lg transform hover:scale-105 transition-all duration-200"
        >
          <span className="text-2xl">üí≥</span>
          <p className="mt-2 font-medium">ÁµåË≤ªÁ≤æÁÆó</p>
        </button>
      </div>
    </div>
  );
}
